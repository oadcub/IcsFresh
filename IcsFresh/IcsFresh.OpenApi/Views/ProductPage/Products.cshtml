@{
    ViewBag.Title = "Products";
}

<h2>Products</h2>
<div ng-app="productApp" ng-controller="productController">
    <a ng-click="fetch()">Refresh</a><br />
    <input ng-model="product.Code" placeholder="Code" /><br />
    <input ng-model="product.Name" placeholder="Name" /><br />
    <input ng-model="product.CategoryCode" placeholder="CategoryCode" /><br />
    <input ng-model="product.SupplierCode" placeholder="SupplierCode" /><br />
    <a ng-click="insert()">Add</a><br />
    <div ng-show="searchResult.length>0" class="row">
        <div class="col-lg-12">
            <table ng-table="searchResultTable" show-filter="true" class="table table-condensed table-striped">
                <tr ng-repeat="item in finalSearchResult | filter:queryResult ">
                    <td data-title="'Code'"
                        ng-class="getCss(item,'Code')"
                        sortable="'Code'"
                        filter="{Code: 'text'}">
                        <input ng-model="item.Name"
                               ng-model-options='{ debounce: 3000 }'
                               ng-change="update(item,'Code')" />
                    </td>
                    <td data-title="'Name'"
                        ng-class="getCss(item,'Name')"
                        sortable="'Name'"
                        filter="{Name: 'text'}">
                        <input ng-model="item.Name"
                               ng-model-options='{ debounce: 3000 }'
                               ng-change="update(item,'Name')" />
                    </td>
                    <td data-title="'CategoryCode'"
                        ng-class="getCss(item,'CategoryCode')"
                        sortable="'CategoryCode'"
                        filter="{CategoryCode: 'text'}">
                        <select ng-model="item.CategoryCode" ng-change="update(item,'CategoryCode')">
                            <option></option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                        </select>
                    </td>
                    <td data-title="'SupplierCode'"
                        ng-class="getCss(item,'SupplierCode')"
                        sortable="'CategoryCode'"
                        filter="{CategoryCode: 'text'}">
                        <select ng-model="item.SupplierCode" ng-change="update(item,'SupplierCode')">
                            <option></option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                        </select>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <p ng-show="searchResult.length === 0">
        no result found
    </p>

</div>

@section scripts{
    <script src="~/Scripts/ngapp/product.js"></script>
}